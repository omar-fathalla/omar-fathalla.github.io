<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!--  Custom CSS -->
    <link rel="stylesheet" href="css/stylee.css"> 
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            margin-top: 50px;
        }
        .card {
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            width: 100%;
        }
        .form-label {
            font-weight: bold;
        }
        #userTable {
            margin-top: 30px;
        }
    </style>      
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
                <a href="index.html" class="navbar-brand text-warning">Fathalla Market</a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ">
                    <li class="nav-item">
                        <a class="nav-link active " href="Dashboard.html">Dashboard</a>
                </li>
                    <li class="nav-item">
                            <a class="nav-link " href="Construction.html">Construction</a>
                    </li>
                    <li class="nav-item"></li>
                        <a class="nav-link" href="Registration.html">Registration</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Draw.html">Draw</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Report.html">Report</a>
                    </li>
                </ul>
            </div>
        </div>
</nav>
 
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card p-4">
                <h3 class="text-center mb-4">Create Client</h3>
                <form id="userForm">
                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" id="username" placeholder="Enter username" required>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" placeholder="Enter password" required>
                    </div>
                    <div class="mb-3">
                        <label for="branch" class="form-label">Branch</label>
                        <select class="form-select" id="branch" required>
                            <option value="">Select a branch</option>
                            <option value="New York">New York</option>
                            <option value="Los Angeles">Los Angeles</option>
                            <option value="Chicago">Chicago</option>
                            <option value="San Francisco">San Francisco</option>
                        </select>
                    </div>
                    <input type="hidden" id="editingUserId"> <!-- Hidden field to track editing user -->
                    <button type="submit" class="btn btn-primary" id="submitButton">Create User</button>
                </form>
                <div class="alert alert-success mt-3 d-none" id="successMsg">
                    User has been created successfully!
                </div>
                <div class="alert alert-danger mt-3 d-none" id="errorMsg">
                    Please fill out all fields!
                </div>
            </div>
        </div>
    </div>

    <!-- User table -->
    <div class="row justify-content-center py-5 text-center ">
        <div class="col-lg-8">
            <table class="table table-striped mt-4 table-primary " id="userTable">
                <thead>
                    <tr>
                        <th>Num</th>
                        <th>Username</th>
                        <th>Password</th>
                        <th>Branch</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody class="py-5">
                    <!-- Users will be added dynamically here -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Bootstrap JS and dependencies -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

<!-- Custom JS -->
<script>
    let userCount = 0; // To keep track of the number of users created
    let users = []; // To store users data

    document.getElementById('userForm').addEventListener('submit', function(e) {
        e.preventDefault(); // Prevent form submission

        // Get form values
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        var branch = document.getElementById('branch').value;
        var editingUserId = document.getElementById('editingUserId').value;

        // Validate form inputs
        if(username === "" || password === "" || branch === "") {
            document.getElementById('errorMsg').classList.remove('d-none');
            document.getElementById('successMsg').classList.add('d-none');
        } else {
            document.getElementById('errorMsg').classList.add('d-none');
            document.getElementById('successMsg').classList.remove('d-none');

            if (editingUserId) {
                // Update existing user
                updateUser(editingUserId, username, password, branch);
            } else {
                // Add new user to the table
                addUserToTable(username, password, branch);
            }

            // Clear form fields after submission
            document.getElementById('userForm').reset();
            document.getElementById('editingUserId').value = ""; // Reset editing flag
            document.getElementById('submitButton').textContent = "Create User"; // Change button text back
        }
    });

    function addUserToTable(username, password, branch) {
        userCount++; // Increment user count

        let user = {
            id: userCount,
            username: username,
            password: password,
            branch: branch
        };

        users.push(user);

        // Create a new row
        var table = document.getElementById('userTable').getElementsByTagName('tbody')[0];
        var newRow = table.insertRow();

        // Insert cells
        var cell1 = newRow.insertCell(0);
        var cell2 = newRow.insertCell(1);
        var cell3 = newRow.insertCell(2);
        var cell4 = newRow.insertCell(3);
        var cell5 = newRow.insertCell(4);

        // Add content to cells
        cell1.innerHTML = userCount; // User count as the ID
        cell2.innerHTML = username;
        cell3.innerHTML = password; // In a real app, you wouldn't display passwords!
        cell4.innerHTML = branch;
        cell5.innerHTML = `<button class="btn btn-warning btn-sm" onclick="editUser(${userCount})">Edit</button>`;
    }

    function editUser(userId) {
        let user = users.find(u => u.id === userId);

        if (user) {
            document.getElementById('username').value = user.username;
            document.getElementById('password').value = user.password;
            document.getElementById('branch').value = user.branch;
            document.getElementById('editingUserId').value = user.id; // Set the editing ID
            document.getElementById('submitButton').textContent = "Save Changes"; // Change button text
        }
    }

    function updateUser(userId, username, password, branch) {
        let userIndex = users.findIndex(u => u.id === parseInt(userId));

        if (userIndex > -1) {
            users[userIndex].username = username;
            users[userIndex].password = password;
            users[userIndex].branch = branch;

            // Update the table row
            let table = document.getElementById('userTable').getElementsByTagName('tbody')[0];
            let row = table.rows[userIndex];

            row.cells[1].innerHTML = username;
            row.cells[2].innerHTML = password;
            row.cells[3].innerHTML = branch;
        }
    }
</script>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <!-- Custom JS -->
    <script>
        let userCount = 0; // To keep track of the number of users created

        document.getElementById('userForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Prevent form submission

            // Get form values
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;
            var branch = document.getElementById('branch').value;

            // Validate form inputs
            if(username === "" || password === "" || branch === "") {
                document.getElementById('errorMsg').classList.remove('d-none');
                document.getElementById('successMsg').classList.add('d-none');
            } else {
                document.getElementById('errorMsg').classList.add('d-none');
                document.getElementById('successMsg').classList.remove('d-none');

                // Add user to the table
                addUserToTable(username, password, branch);

                // Clear form fields after submission
                document.getElementById('userForm').reset();
            }
        });

        function addUserToTable(username, password, branch) {
            userCount++; // Increment user count

            // Create a new row
            var table = document.getElementById('userTable').getElementsByTagName('tbody')[0];
            var newRow = table.insertRow();

            // Insert cells
            var cell1 = newRow.insertCell(0);
            var cell2 = newRow.insertCell(1);
            var cell3 = newRow.insertCell(2);
            var cell4 = newRow.insertCell(3);

            // Add content to cells
            cell1.innerHTML = userCount; // User count as the ID
            cell2.innerHTML = username;
            cell3.innerHTML = password; // In a real app, you wouldn't display passwords!
            cell4.innerHTML = branch;
        }
    </script>
</body>
</html>



<!-- Footer -->
<footer class="bg-dark text-light text-center py-3 ">
    <div class="container">
      <p>All rights reserved. © Fathalla | Programming Department "2024".</p>
    </div>
</footer>






     <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/darkmodetoggle.js"></script>
    <script src="js/script.js"></script>
</body>
</html>